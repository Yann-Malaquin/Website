{% extends 'base.html.twig' %}

{% block title %}Catégorie |
	{{title}}
{% endblock %}

{% block body %}
	<link href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" rel="stylesheet">

	{{ encore_entry_link_tags('css/div') }}
	{{ encore_entry_link_tags('css/span') }}
	{{ encore_entry_link_tags('css/title') }}
	{{ encore_entry_link_tags('css/p') }}
	{{ encore_entry_link_tags('css/link') }}
	{{ encore_entry_link_tags('css/table') }}

	<style>
		.css-homeDisplayDisconnected,
		.css-homeDisplayConnected {
			margin: 80px auto;
			text-align: center;
		}

		.css-meetingDisplayToday {
			margin: 40px auto;
		}

		.css-showMeetingsToday {
			display: inline-block;
			margin: 20px auto;
			padding: 40px;
			border: 4px solid;
			border-radius: 20px;
		}

		.homeDisplay-displayAll {
			background-color: darkslategrey;
			display: block;
			max-width: 800px;
			margin: 80px auto;
			border-style: solid;
			border-color: black;
			color: white;
			text-align: center;
		}

		.css-columnEvent {
			display: inline-block;
			position: static;
			margin: 40px auto;
			text-align: center;
			padding: 20px;
		}
	</style>
	<div class="css-homeDisplayDisconnected">
		<div class="css-showMeetingsToday">
			{% for match in matchs %}
				<match>
					<div class="categoryDisplay-displayAll">
						<h3 class='categoryDisplay-titleh3'>{{ match.sport }},
							{{ match.competition }}</h3>
						<h4 class='categoryDisplay-titleh4'>{{ match.getInfrastructure().name }}</h4>
						<table class='categoryDisplay-tableDisplayMeeting'>
							<tbody>
								<tr>
									<td class='categoryDisplay-tdDisplayMeeting'>
										<a href="{{ path('team' , {team : match.getTeamHome().abbreviation , city : app.request.attributes.get('city'),categorie : app.request.attributes.get('categorie') }) }}">
											<img style="margin-right:20px" src="{{ asset('image/logo/'~ match.sport ~'/'~ match.getTeamHome().logo) }}" height="64" width="64"></a>
										{{ match.getTeamHome().name }}
										<a class="js-fav {{match.getTeamHome().id}}" href="{{path('team_favorite',{'id' : match.getTeamHome().id}) }}">
											{% if app.user %}
												{% if match.getTeamHome().isFavoritedbyUser(app.user) %}
													<i id="{{'js-fav-id-'~match.getTeamHome().id}}" class="fas fa-star" style="color:yellow;"></i>
												{% else %}
													<i id="{{'js-fav-id-'~match.getTeamHome().id}}" class="far fa-star" style="color:yellow;"></i>
												{% endif %}
											{% endif %}
										</a>
									</td>

									<td class='categoryDisplay-tdDisplayMeeting'>
										{% if "now"|date("Y-m-d") is same as (match.meeting|date("Y-m-d")) %}
											<div class='categoryDisplay-dateDisplay'>{{ match.meeting|date("G:i") }}
											</div>
										{% else %}
											<div class='categoryDisplay-dateDisplay'>
												{{ match.meeting|date("G:i") }}<br>
												{{ match.meeting|date("d-m-Y")}}
											</div>
										{% endif %}
									</td>
									<td class='categoryDisplay-tdDisplayMeeting'>
										<a class="js-fav" href="{{path('team_favorite',{'id' : match.getTeamOutside().id}) }}">
											{% if app.user %}
												{% if match.getTeamOutside().isFavoritedbyUser(app.user) %}
													<i id="{{'js-fav-id-'~match.getTeamOutside().id}}" class="fas fa-star" style="color:yellow;"></i>
												{% else %}
													<i id="{{'js-fav-id-'~match.getTeamOutside().id}}" class="far fa-star" style="color:yellow;"></i>
												{% endif %}
											{% endif %}
										</a>
										{{ match.getTeamOutside().name }}
										<a href="{{ path('team' , {team : match.getTeamOutside().abbreviation , city : app.request.attributes.get('city'),categorie : app.request.attributes.get('categorie') }) }}">
											<img style="margin-left:20px" src="{{ asset('image/logo/'~ match.sport ~'/'~ match.getTeamOutside().logo) }}" height="64" width="64">
										</a>
									</td>
								</tr>
							</tbody>
						</table>
						<p>
							{% if "now"|date("Y-m-d") is same as (match.meeting|date("Y-m-d")) %}
								<a class='categoryDisplay-link' href=" {{ path('map',{ city : match.city } ) }}">Aller à la carte</a>
							{% endif %}
						</p>
					</div>
				</match>
			{% endfor %}
		</div>
	</div>
	{% block javascripts %}
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		{{ encore_entry_script_tags('js/favorite') }}
	{% endblock %}
{% endblock %}
